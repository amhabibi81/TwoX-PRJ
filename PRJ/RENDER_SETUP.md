# Render Blueprint Configuration - Quick Reference

## Quick Fix for Network Error

**If you see "Network Error" on your website:**

ðŸ‘‰ **See the simple step-by-step guide: [NETWORK_ERROR_FIX.md](NETWORK_ERROR_FIX.md)**

**Quick summary:**
1. Get your backend and frontend URLs from Render dashboard
2. Set `VITE_API_URL` in frontend service = your backend URL â†’ Deploy
3. Set `CORS_ORIGIN` in backend service = your frontend URL â†’ Restart
4. Test by logging in

---

## Current Step: Initial Environment Variable Configuration

You're at the Render Blueprint configuration screen. Enter these values:

### Backend Service (`team-eval-backend`)

**CORS_ORIGIN:**
```
*
```
*(Temporary - allows all origins. Will update after frontend deploys)*

**ADMIN_EMAILS:**
```
amhabibi81@gmail.com
```
*(Replace with your admin email if different)*

### Frontend Service (`team-eval-frontend`)

**VITE_API_URL:**
```
(Leave empty for now)
```
*(Will be updated after backend deploys)*

---

## After Deployment: Update Environment Variables

Once both services are deployed (5-10 minutes), follow these steps:

### Step 1: Get Service URLs

1. Go to your Render Dashboard
2. Click on `team-eval-backend` service
3. Copy the service URL (e.g., `https://team-eval-backend.onrender.com`)
4. Click on `team-eval-frontend` service  
5. Copy the service URL (e.g., `https://team-eval-frontend.onrender.com`)

### Step 2: Update Backend CORS_ORIGIN

1. Go to `team-eval-backend` service dashboard
2. Click "Environment" tab
3. Find `CORS_ORIGIN` variable
4. Update value to your frontend URL: `https://team-eval-frontend.onrender.com`
5. Click "Save Changes" (triggers redeploy)

### Step 3: Update Frontend VITE_API_URL

1. Go to `team-eval-frontend` service dashboard
2. Click "Environment" tab
3. Find `VITE_API_URL` variable
4. Update value to your backend URL: `https://team-eval-backend.onrender.com`
5. Click "Save Changes" (triggers redeploy)

---

## Notes

- **JWT_SECRET**: Auto-generated by Render (configured in render.yaml)
- **DATABASE_PATH**: Already set to `./data/database.sqlite` in render.yaml
- **Initial CORS**: Using `*` temporarily is less secure but necessary until frontend URL is known
- **Service URLs**: Format is `https://service-name.onrender.com`

## Verification

After updating environment variables and redeploy completes:

1. Visit your frontend URL in a browser
2. Test signup/login functionality
3. Verify API calls work from frontend to backend
4. Check browser console for any CORS errors

---

## Troubleshooting: Network Error

If you see "Network Error" or "Network error. Please check your connection and try again" on the deployed website:

### Root Cause
The frontend is trying to connect to `http://localhost:5000` (default) because `VITE_API_URL` is not set, or the backend is blocking requests because `CORS_ORIGIN` doesn't match the frontend URL.

### Solution

**1. Verify Environment Variables are Set:**

**Frontend Service (`team-eval-frontend`):**
- Go to Render Dashboard â†’ `team-eval-frontend` â†’ Environment tab
- Verify `VITE_API_URL` is set to your backend URL: `https://team-eval-backend.onrender.com`
- If missing or incorrect, add/update it and trigger a new deployment

**Backend Service (`team-eval-backend`):**
- Go to Render Dashboard â†’ `team-eval-backend` â†’ Environment tab
- Verify `CORS_ORIGIN` is set to your frontend URL: `https://team-eval-frontend.onrender.com`
- If missing or incorrect, update it and manually restart the service

**2. Important Notes:**

- **VITE_API_URL must be set BEFORE build**: Since Vite embeds environment variables at build time, `VITE_API_URL` must be set in Render before the frontend build runs. If you set it after deployment, you must trigger a new deployment.

- **CORS_ORIGIN can be updated anytime**: The backend CORS setting takes effect on service restart. After updating `CORS_ORIGIN`, manually restart the backend service from the Render dashboard.

**3. How to Trigger New Deployment:**

- **Frontend**: After setting/updating `VITE_API_URL`, go to the service dashboard and click "Manual Deploy" â†’ "Deploy latest commit"
- **Backend**: After setting/updating `CORS_ORIGIN`, click "Manual Deploy" â†’ "Restart" (or it will restart automatically on next deploy)

**4. Verify Configuration:**

- Open browser DevTools â†’ Network tab
- Make a request from the frontend (e.g., login)
- Check the request URL - it should point to your backend URL (not localhost:5000)
- Check response headers - should include `Access-Control-Allow-Origin` with your frontend URL

**5. Expected Values:**

Replace with your actual Render service URLs:
- Frontend `VITE_API_URL`: `https://team-eval-backend.onrender.com`
- Backend `CORS_ORIGIN`: `https://team-eval-frontend.onrender.com`
